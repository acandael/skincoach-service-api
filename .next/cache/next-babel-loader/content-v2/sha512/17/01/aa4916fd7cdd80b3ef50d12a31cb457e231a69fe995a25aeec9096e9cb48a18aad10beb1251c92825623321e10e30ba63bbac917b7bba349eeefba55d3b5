{"ast":null,"code":"function truncateDecimalsOfNumber(originalNumber, numberOfDecimals = 2) {\n  // toFixed() converts a number into a string by truncating it\n  // with the number of decimals passed as parameter.\n  const amountTruncated = originalNumber.toFixed(numberOfDecimals); // We use parseFloat() to return a transform the string into a number\n\n  return parseFloat(amountTruncated);\n}\n\nfunction calculateVoucherDiscountAmount({\n  voucher,\n  amount\n}) {\n  // We assume that the voucher has the right format.\n  // It either has `discountPercent` or `discountAmount`\n  const isDiscountAmount = Boolean(voucher.components[1].content.number);\n  console.log(isDiscountAmount);\n\n  if (isDiscountAmount) {\n    return voucher.components[1].content.number;\n  }\n\n  const amountToDiscount = amount * voucher.discountPercent / 100;\n  return truncateDecimalsOfNumber(amountToDiscount);\n}\n\nmodule.exports = {\n  calculateVoucherDiscountAmount\n};","map":{"version":3,"sources":["/Users/acandael/Sites/crystallize-app/src/services/basket-service/calculate-voucher-discount-amount.js"],"names":["truncateDecimalsOfNumber","originalNumber","numberOfDecimals","amountTruncated","toFixed","parseFloat","calculateVoucherDiscountAmount","voucher","amount","isDiscountAmount","Boolean","components","content","number","console","log","amountToDiscount","discountPercent","module","exports"],"mappings":"AACA,SAASA,wBAAT,CAAkCC,cAAlC,EAAkDC,gBAAgB,GAAG,CAArE,EAAwE;AACtE;AACA;AACA,QAAMC,eAAe,GAAGF,cAAc,CAACG,OAAf,CAAuBF,gBAAvB,CAAxB,CAHsE,CAItE;;AACA,SAAOG,UAAU,CAACF,eAAD,CAAjB;AACD;;AAED,SAASG,8BAAT,CAAwC;AAAEC,EAAAA,OAAF;AAAWC,EAAAA;AAAX,CAAxC,EAA6D;AAC3D;AACA;AAEA,QAAMC,gBAAgB,GAAGC,OAAO,CAACH,OAAO,CAACI,UAAR,CAAmB,CAAnB,EAAsBC,OAAtB,CAA8BC,MAA/B,CAAhC;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYN,gBAAZ;;AAEA,MAAIA,gBAAJ,EAAsB;AACpB,WAAOF,OAAO,CAACI,UAAR,CAAmB,CAAnB,EAAsBC,OAAtB,CAA8BC,MAArC;AACD;;AAED,QAAMG,gBAAgB,GAAIR,MAAM,GAAGD,OAAO,CAACU,eAAlB,GAAqC,GAA9D;AAEA,SAAOjB,wBAAwB,CAACgB,gBAAD,CAA/B;AACD;;AAEDE,MAAM,CAACC,OAAP,GAAiB;AACfb,EAAAA;AADe,CAAjB","sourcesContent":["\nfunction truncateDecimalsOfNumber(originalNumber, numberOfDecimals = 2) {\n  // toFixed() converts a number into a string by truncating it\n  // with the number of decimals passed as parameter.\n  const amountTruncated = originalNumber.toFixed(numberOfDecimals);\n  // We use parseFloat() to return a transform the string into a number\n  return parseFloat(amountTruncated);\n}\n\nfunction calculateVoucherDiscountAmount({ voucher, amount }) {\n  // We assume that the voucher has the right format.\n  // It either has `discountPercent` or `discountAmount`\n  \n  const isDiscountAmount = Boolean(voucher.components[1].content.number);\n\n  console.log(isDiscountAmount)\n\n  if (isDiscountAmount) {\n    return voucher.components[1].content.number;\n  }\n\n  const amountToDiscount = (amount * voucher.discountPercent) / 100;\n\n  return truncateDecimalsOfNumber(amountToDiscount);\n}\n\nmodule.exports = {\n  calculateVoucherDiscountAmount,\n};"]},"metadata":{},"sourceType":"script"}