{"ast":null,"code":"function truncateDecimalsOfNumber(originalNumber, numberOfDecimals = 2) {\n  // toFixed() converts a number into a string by truncating it\n  // with the number of decimals passed as parameter.\n  const amountTruncated = originalNumber.toFixed(numberOfDecimals); // We use parseFloat() to return a transform the string into a number\n\n  return parseFloat(amountTruncated);\n}\n\nfunction calculateVoucherDiscountAmount({\n  voucher,\n  amount\n}) {\n  // We assume that the voucher has the right format.\n  // It either has `discountPercent` or `discountAmount`\n  const discountAmount = voucher.components[1].content.selectedComponent.content.number;\n  const selectedComponent = voucher.components[1].content.selectedComponent;\n\n  if (selectedComponent.name === 'discountAmount') {\n    return discountAmount;\n  }\n\n  const amountToDiscount = amount * discountAmount / 100;\n  return truncateDecimalsOfNumber(amountToDiscount);\n}\n\nmodule.exports = {\n  calculateVoucherDiscountAmount\n};","map":{"version":3,"sources":["/Users/acandael/Sites/crystallize-app/src/services/basket-service/calculate-voucher-discount-amount.js"],"names":["truncateDecimalsOfNumber","originalNumber","numberOfDecimals","amountTruncated","toFixed","parseFloat","calculateVoucherDiscountAmount","voucher","amount","discountAmount","components","content","selectedComponent","number","name","amountToDiscount","module","exports"],"mappings":"AACA,SAASA,wBAAT,CAAkCC,cAAlC,EAAkDC,gBAAgB,GAAG,CAArE,EAAwE;AACtE;AACA;AACA,QAAMC,eAAe,GAAGF,cAAc,CAACG,OAAf,CAAuBF,gBAAvB,CAAxB,CAHsE,CAItE;;AACA,SAAOG,UAAU,CAACF,eAAD,CAAjB;AACD;;AAED,SAASG,8BAAT,CAAwC;AAAEC,EAAAA,OAAF;AAAWC,EAAAA;AAAX,CAAxC,EAA6D;AAC3D;AACA;AAEA,QAAMC,cAAc,GAAGF,OAAO,CAACG,UAAR,CAAmB,CAAnB,EAAsBC,OAAtB,CAA8BC,iBAA9B,CAAgDD,OAAhD,CAAwDE,MAA/E;AAEA,QAAMD,iBAAiB,GAAGL,OAAO,CAACG,UAAR,CAAmB,CAAnB,EAAsBC,OAAtB,CAA8BC,iBAAxD;;AAEA,MAAIA,iBAAiB,CAACE,IAAlB,KAA2B,gBAA/B,EAAiD;AAC/C,WAAOL,cAAP;AACD;;AAED,QAAMM,gBAAgB,GAAIP,MAAM,GAAGC,cAAV,GAA4B,GAArD;AAEA,SAAOT,wBAAwB,CAACe,gBAAD,CAA/B;AACD;;AAEDC,MAAM,CAACC,OAAP,GAAiB;AACfX,EAAAA;AADe,CAAjB","sourcesContent":["\nfunction truncateDecimalsOfNumber(originalNumber, numberOfDecimals = 2) {\n  // toFixed() converts a number into a string by truncating it\n  // with the number of decimals passed as parameter.\n  const amountTruncated = originalNumber.toFixed(numberOfDecimals);\n  // We use parseFloat() to return a transform the string into a number\n  return parseFloat(amountTruncated);\n}\n\nfunction calculateVoucherDiscountAmount({ voucher, amount }) {\n  // We assume that the voucher has the right format.\n  // It either has `discountPercent` or `discountAmount`\n  \n  const discountAmount = voucher.components[1].content.selectedComponent.content.number;\n\n  const selectedComponent = voucher.components[1].content.selectedComponent;\n\n  if (selectedComponent.name === 'discountAmount') {\n    return discountAmount;\n  }\n\n  const amountToDiscount = (amount * discountAmount) / 100;\n\n  return truncateDecimalsOfNumber(amountToDiscount);\n}\n\nmodule.exports = {\n  calculateVoucherDiscountAmount,\n};"]},"metadata":{},"sourceType":"script"}