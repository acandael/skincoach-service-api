{"ast":null,"code":"module.exports = async function createPaymentIntent({\n  checkoutModel,\n  context\n}) {\n  const basketService = require(\"../../basket-service\");\n\n  const {\n    getClient\n  } = require(\"./utils\");\n\n  const {\n    basketModel,\n    metadata\n  } = checkoutModel;\n  console.log(metadata);\n  const basket = await basketService.get({\n    basketModel,\n    context\n  });\n  const paymentIntent = await getClient().paymentIntents.create({\n    amount: basket.total.gross * 100,\n    currency: basket.total.currency\n  });\n  return paymentIntent;\n};","map":{"version":3,"sources":["/Users/acandael/Sites/crystallize-app/src/services/payment-providers/stripe/create-payment-intent.js"],"names":["module","exports","createPaymentIntent","checkoutModel","context","basketService","require","getClient","basketModel","metadata","console","log","basket","get","paymentIntent","paymentIntents","create","amount","total","gross","currency"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiB,eAAeC,mBAAf,CAAmC;AAClDC,EAAAA,aADkD;AAElDC,EAAAA;AAFkD,CAAnC,EAGd;AACD,QAAMC,aAAa,GAAGC,OAAO,CAAC,sBAAD,CAA7B;;AAEA,QAAM;AAAEC,IAAAA;AAAF,MAAgBD,OAAO,CAAC,SAAD,CAA7B;;AAEA,QAAM;AAAEE,IAAAA,WAAF;AAAeC,IAAAA;AAAf,MAA4BN,aAAlC;AAEAO,EAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AAEA,QAAMG,MAAM,GAAG,MAAMP,aAAa,CAACQ,GAAd,CAAkB;AAAEL,IAAAA,WAAF;AAAeJ,IAAAA;AAAf,GAAlB,CAArB;AAEA,QAAMU,aAAa,GAAG,MAAMP,SAAS,GAAGQ,cAAZ,CAA2BC,MAA3B,CAAkC;AAC5DC,IAAAA,MAAM,EAAEL,MAAM,CAACM,KAAP,CAAaC,KAAb,GAAqB,GAD+B;AAE5DC,IAAAA,QAAQ,EAAER,MAAM,CAACM,KAAP,CAAaE;AAFqC,GAAlC,CAA5B;AAKA,SAAON,aAAP;AACD,CApBD","sourcesContent":["module.exports = async function createPaymentIntent({\n  checkoutModel,\n  context,\n}) {\n  const basketService = require(\"../../basket-service\");\n\n  const { getClient } = require(\"./utils\");\n\n  const { basketModel, metadata } = checkoutModel;\n\n  console.log(metadata)\n\n  const basket = await basketService.get({ basketModel, context });\n\n  const paymentIntent = await getClient().paymentIntents.create({\n    amount: basket.total.gross * 100,\n    currency: basket.total.currency,\n  });\n\n  return paymentIntent;\n};"]},"metadata":{},"sourceType":"script"}