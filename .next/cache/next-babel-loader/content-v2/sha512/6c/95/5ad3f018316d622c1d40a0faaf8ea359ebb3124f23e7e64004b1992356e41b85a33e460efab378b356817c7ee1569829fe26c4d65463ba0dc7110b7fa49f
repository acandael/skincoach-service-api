{"ast":null,"code":"module.exports = async function createPaymentIntent({\n  checkoutModel,\n  context\n}) {\n  const basketService = require(\"../../basket-service\");\n\n  const {\n    getClient\n  } = require(\"./utils\");\n\n  const {\n    basketModel,\n    metadata\n  } = checkoutModel;\n  const basket = await basketService.get({\n    basketModel,\n    context\n  });\n  console.log(metadata.shipping);\n  const paymentIntent = await getClient().paymentIntents.create({\n    amount: metadata.shipping ? basket.total.gross * 100 + 8 : basket.total.gross * 100,\n    currency: basket.total.currency\n  });\n  return paymentIntent;\n};","map":{"version":3,"sources":["/Users/acandael/Sites/crystallize-app/src/services/payment-providers/stripe/create-payment-intent.js"],"names":["module","exports","createPaymentIntent","checkoutModel","context","basketService","require","getClient","basketModel","metadata","basket","get","console","log","shipping","paymentIntent","paymentIntents","create","amount","total","gross","currency"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiB,eAAeC,mBAAf,CAAmC;AAClDC,EAAAA,aADkD;AAElDC,EAAAA;AAFkD,CAAnC,EAGd;AACD,QAAMC,aAAa,GAAGC,OAAO,CAAC,sBAAD,CAA7B;;AAEA,QAAM;AAAEC,IAAAA;AAAF,MAAgBD,OAAO,CAAC,SAAD,CAA7B;;AAEA,QAAM;AAAEE,IAAAA,WAAF;AAAeC,IAAAA;AAAf,MAA4BN,aAAlC;AAEA,QAAMO,MAAM,GAAG,MAAML,aAAa,CAACM,GAAd,CAAkB;AAAEH,IAAAA,WAAF;AAAeJ,IAAAA;AAAf,GAAlB,CAArB;AAEAQ,EAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAQ,CAACK,QAArB;AAEA,QAAMC,aAAa,GAAG,MAAMR,SAAS,GAAGS,cAAZ,CAA2BC,MAA3B,CAAkC;AAC5DC,IAAAA,MAAM,EAAET,QAAQ,CAACK,QAAT,GAAoBJ,MAAM,CAACS,KAAP,CAAaC,KAAb,GAAqB,GAArB,GAA2B,CAA/C,GAAkDV,MAAM,CAACS,KAAP,CAAaC,KAAb,GAAqB,GADnB;AAE5DC,IAAAA,QAAQ,EAAEX,MAAM,CAACS,KAAP,CAAaE;AAFqC,GAAlC,CAA5B;AAKA,SAAON,aAAP;AACD,CApBD","sourcesContent":["module.exports = async function createPaymentIntent({\n  checkoutModel,\n  context,\n}) {\n  const basketService = require(\"../../basket-service\");\n\n  const { getClient } = require(\"./utils\");\n\n  const { basketModel, metadata } = checkoutModel;\n\n  const basket = await basketService.get({ basketModel, context });\n\n  console.log(metadata.shipping)\n\n  const paymentIntent = await getClient().paymentIntents.create({\n    amount: metadata.shipping ? basket.total.gross * 100 + 8: basket.total.gross * 100,\n    currency: basket.total.currency,\n  });\n\n  return paymentIntent;\n};"]},"metadata":{},"sourceType":"script"}