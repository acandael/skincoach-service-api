{"ast":null,"code":"import userService from \"../../../src/services/user-service\";\n/**\n * Logout the current user\n * Supports a redirect in the query, like this:\n * http://localhost:3001/api/user/logout?redirect=${encodeURIComponent('https://example.com')}\n * http://localhost:3001/api/user/logout?redirect=http%3A%2F%2Fexample.com\n * -> will redirect to https://example.com\n */\n\nexport default function logout(req, res) {\n  res.setHeader(\"Set-Cookie\", `${userService.USER_TOKEN_NAME}=deleted; HttpOnly; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT`);\n  const {\n    redirect\n  } = req.query;\n\n  if (redirect) {\n    res.setHeader(\"Location\", decodeURIComponent(redirect));\n    res.status(302);\n  }\n\n  res.send(\"Logged out!\");\n}","map":{"version":3,"sources":["/Users/acandael/Sites/webshop-anniek/crystallize-app/pages/api/user/logout.js"],"names":["userService","logout","req","res","setHeader","USER_TOKEN_NAME","redirect","query","decodeURIComponent","status","send"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,oCAAxB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,SAASC,MAAT,CAAgBC,GAAhB,EAAqBC,GAArB,EAA0B;AACvCA,EAAAA,GAAG,CAACC,SAAJ,CACE,YADF,EAEG,GAAEJ,WAAW,CAACK,eAAgB,mEAFjC;AAKA,QAAM;AAAEC,IAAAA;AAAF,MAAeJ,GAAG,CAACK,KAAzB;;AACA,MAAID,QAAJ,EAAc;AACZH,IAAAA,GAAG,CAACC,SAAJ,CAAc,UAAd,EAA0BI,kBAAkB,CAACF,QAAD,CAA5C;AACAH,IAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX;AACD;;AAEDN,EAAAA,GAAG,CAACO,IAAJ,CAAS,aAAT;AACD","sourcesContent":["import userService from \"../../../src/services/user-service\";\n\n/**\n * Logout the current user\n * Supports a redirect in the query, like this:\n * http://localhost:3001/api/user/logout?redirect=${encodeURIComponent('https://example.com')}\n * http://localhost:3001/api/user/logout?redirect=http%3A%2F%2Fexample.com\n * -> will redirect to https://example.com\n */\n\nexport default function logout(req, res) {\n  res.setHeader(\n    \"Set-Cookie\",\n    `${userService.USER_TOKEN_NAME}=deleted; HttpOnly; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT`\n  );\n\n  const { redirect } = req.query;\n  if (redirect) {\n    res.setHeader(\"Location\", decodeURIComponent(redirect));\n    res.status(302);\n  }\n\n  res.send(\"Logged out!\");\n}\n"]},"metadata":{},"sourceType":"module"}