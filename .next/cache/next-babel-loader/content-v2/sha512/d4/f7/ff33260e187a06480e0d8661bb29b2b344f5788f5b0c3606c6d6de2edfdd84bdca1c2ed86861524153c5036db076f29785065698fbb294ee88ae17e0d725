{"ast":null,"code":"const {\n  sendEmail\n} = require(\"./utils\");\n\nmodule.exports = async function sendMagicLinkLogin({\n  loginLink,\n  email\n}) {\n  console.log(email);\n\n  try {\n    const mjml2html = require(\"mjml\");\n\n    const {\n      html\n    } = mjml2html(`\n      <mjml>\n        <mj-body>\n          <mj-section>\n            <mj-column>\n              <mj-text>Hi there! Simply follow the link below to login.</mj-text>\n              <mj-button href=\"${loginLink}\" align=\"left\">Click here to login</mj-button>\n            </mj-column>\n          </mj-section>\n        </mj-body>\n      </mjml>\n    `);\n    await sendEmail({\n      to: email,\n      subject: \"Magic link login\",\n      html\n    });\n    return {\n      success: true\n    };\n  } catch (error) {\n    console.log(error);\n    return {\n      success: false,\n      error\n    };\n  }\n};","map":{"version":3,"sources":["/Users/acandael/Sites/webshop-anniek/crystallize-app/src/services/email-service/user-magic-link.js"],"names":["sendEmail","require","module","exports","sendMagicLinkLogin","loginLink","email","console","log","mjml2html","html","to","subject","success","error"],"mappings":"AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAgBC,OAAO,CAAC,SAAD,CAA7B;;AAEAC,MAAM,CAACC,OAAP,GAAiB,eAAeC,kBAAf,CAAkC;AAAEC,EAAAA,SAAF;AAAaC,EAAAA;AAAb,CAAlC,EAAwD;AACvEC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;;AACA,MAAI;AACF,UAAMG,SAAS,GAAGR,OAAO,CAAC,MAAD,CAAzB;;AACA,UAAM;AAAES,MAAAA;AAAF,QAAWD,SAAS,CAAE;AAChC;AACA;AACA;AACA;AACA;AACA,iCAAiCJ,SAAU;AAC3C;AACA;AACA;AACA;AACA,KAX8B,CAA1B;AAaA,UAAML,SAAS,CAAC;AACdW,MAAAA,EAAE,EAAEL,KADU;AAEdM,MAAAA,OAAO,EAAE,kBAFK;AAGdF,MAAAA;AAHc,KAAD,CAAf;AAMA,WAAO;AACLG,MAAAA,OAAO,EAAE;AADJ,KAAP;AAGD,GAxBD,CAwBE,OAAOC,KAAP,EAAc;AACdP,IAAAA,OAAO,CAACC,GAAR,CAAYM,KAAZ;AACA,WAAO;AACLD,MAAAA,OAAO,EAAE,KADJ;AAELC,MAAAA;AAFK,KAAP;AAID;AACF,CAjCD","sourcesContent":["const { sendEmail } = require(\"./utils\");\n\nmodule.exports = async function sendMagicLinkLogin({ loginLink, email }) {\n  console.log(email)\n  try {\n    const mjml2html = require(\"mjml\");\n    const { html } = mjml2html(`\n      <mjml>\n        <mj-body>\n          <mj-section>\n            <mj-column>\n              <mj-text>Hi there! Simply follow the link below to login.</mj-text>\n              <mj-button href=\"${loginLink}\" align=\"left\">Click here to login</mj-button>\n            </mj-column>\n          </mj-section>\n        </mj-body>\n      </mjml>\n    `);\n\n    await sendEmail({\n      to: email,\n      subject: \"Magic link login\",\n      html,\n    });\n\n    return {\n      success: true,\n    };\n  } catch (error) {\n    console.log(error);\n    return {\n      success: false,\n      error,\n    };\n  }\n};"]},"metadata":{},"sourceType":"script"}