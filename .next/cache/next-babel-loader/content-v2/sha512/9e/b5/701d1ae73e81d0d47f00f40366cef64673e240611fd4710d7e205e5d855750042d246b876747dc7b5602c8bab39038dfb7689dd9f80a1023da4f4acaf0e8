{"ast":null,"code":"const basketService = require(\"../../basket-service\");\n\nconst {\n  getClient\n} = require(\"./utils\");\n\nmodule.exports = async function createPaymentIntent({\n  checkoutModel,\n  context\n}) {\n  const {\n    basketModel\n  } = checkoutModel;\n  const {\n    user\n  } = context;\n  const basket = await basketService.get({\n    basketModel,\n    user\n  });\n  const paymentIntent = await getClient().paymentIntents.create({\n    amount: basket.total.gross * 100,\n    currency: basket.total.currency\n  });\n  return paymentIntent;\n};","map":{"version":3,"sources":["/Users/acandael/Sites/webshop-anniek/crystallize-app/src/services/payment-providers/stripe/create-payment-intent.js"],"names":["basketService","require","getClient","module","exports","createPaymentIntent","checkoutModel","context","basketModel","user","basket","get","paymentIntent","paymentIntents","create","amount","total","gross","currency"],"mappings":"AAAA,MAAMA,aAAa,GAAGC,OAAO,CAAC,sBAAD,CAA7B;;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAgBD,OAAO,CAAC,SAAD,CAA7B;;AAEAE,MAAM,CAACC,OAAP,GAAiB,eAAeC,mBAAf,CAAmC;AAClDC,EAAAA,aADkD;AAElDC,EAAAA;AAFkD,CAAnC,EAGd;AACD,QAAM;AAAEC,IAAAA;AAAF,MAAkBF,aAAxB;AACA,QAAM;AAAEG,IAAAA;AAAF,MAAWF,OAAjB;AACA,QAAMG,MAAM,GAAG,MAAMV,aAAa,CAACW,GAAd,CAAkB;AAAEH,IAAAA,WAAF;AAAeC,IAAAA;AAAf,GAAlB,CAArB;AAEA,QAAMG,aAAa,GAAG,MAAMV,SAAS,GAAGW,cAAZ,CAA2BC,MAA3B,CAAkC;AAC5DC,IAAAA,MAAM,EAAEL,MAAM,CAACM,KAAP,CAAaC,KAAb,GAAqB,GAD+B;AAE5DC,IAAAA,QAAQ,EAAER,MAAM,CAACM,KAAP,CAAaE;AAFqC,GAAlC,CAA5B;AAKA,SAAON,aAAP;AACD,CAdD","sourcesContent":["const basketService = require(\"../../basket-service\");\n\nconst { getClient } = require(\"./utils\");\n\nmodule.exports = async function createPaymentIntent({\n  checkoutModel,\n  context,\n}) {\n  const { basketModel } = checkoutModel;\n  const { user } = context;\n  const basket = await basketService.get({ basketModel, user });\n\n  const paymentIntent = await getClient().paymentIntents.create({\n    amount: basket.total.gross * 100,\n    currency: basket.total.currency,\n  });\n\n  return paymentIntent;\n};\n"]},"metadata":{},"sourceType":"script"}